import{j as o,aQ as de,aW as U,r as y,h as pe,f as Y,bl as me,T as ge,b as ve,L as ye,c as he,A as be}from"./index-BhtxJkHA.js";import{E as X}from"./EventCard-yQMs0_jT.js";import{M as xe}from"./map-pin-CIy_9QZf.js";import"./index-BMBbtaCK.js";import"./dialog-R0ziYrf0.js";import"./x-C3V0CQLz.js";import"./useMutation-Dfw8XY20.js";function Se(){return o.jsx(de,{variant:"rounded",width:"100%",height:312,sx:{borderRadius:6}})}var se={},we="Expected a function",ee=NaN,_e="[object Symbol]",Pe=/^\s+|\s+$/g,je=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Ee=/^0o[0-7]+$/i,Ae=parseInt,Ce=typeof U=="object"&&U&&U.Object===Object&&U,Le=typeof self=="object"&&self&&self.Object===Object&&self,Te=Ce||Le||Function("return this")(),Ie=Object.prototype,ke=Ie.toString,Me=Math.max,Re=Math.min,z=function(){return Te.Date.now()};function Ne(e,r,t){var n,c,u,a,l,f,b=0,x=!1,h=!1,P=!0;if(typeof e!="function")throw new TypeError(we);r=te(r)||0,D(t)&&(x=!!t.leading,h="maxWait"in t,u=h?Me(te(t.maxWait)||0,r):u,P="trailing"in t?!!t.trailing:P);function S(s){var g=n,j=c;return n=c=void 0,b=s,a=e.apply(j,g),a}function B(s){return b=s,l=setTimeout(d,r),x?S(s):a}function L(s){var g=s-f,j=s-b,A=r-g;return h?Re(A,u-j):A}function T(s){var g=s-f,j=s-b;return f===void 0||g>=r||g<0||h&&j>=u}function d(){var s=z();if(T(s))return O(s);l=setTimeout(d,L(s))}function O(s){return l=void 0,P&&n?S(s):(n=c=void 0,a)}function E(){l!==void 0&&clearTimeout(l),b=0,n=f=c=l=void 0}function G(){return l===void 0?a:O(z())}function _(){var s=z(),g=T(s);if(n=arguments,c=this,f=s,g){if(l===void 0)return B(f);if(h)return l=setTimeout(d,r),S(f)}return l===void 0&&(l=setTimeout(d,r)),a}return _.cancel=E,_.flush=G,_}function D(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Be(e){return!!e&&typeof e=="object"}function Ge(e){return typeof e=="symbol"||Be(e)&&ke.call(e)==_e}function te(e){if(typeof e=="number")return e;if(Ge(e))return ee;if(D(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=D(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Pe,"");var t=Oe.test(e);return t||Ee.test(e)?Ae(e.slice(2),t?2:8):je.test(e)?ee:+e}var Qe=Ne,N={};Object.defineProperty(N,"__esModule",{value:!0});N.loadGoogleMapScript=N.isBrowser=void 0;var ae=typeof window<"u"&&window.document;N.isBrowser=ae;var Ue=function(r,t){if(!ae||typeof google<"u"&&google.maps&&google.maps.api)return Promise.resolve();var n=document.querySelectorAll('script[src*="'.concat(r,'"]'));if(n&&n.length)return new Promise(function(a){if(typeof google<"u")return a();n[0].addEventListener("load",function(){return a()})});var c=new URL(t);c.searchParams.set("callback","__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__");var u=document.createElement("script");return u.src=c.toString(),new Promise(function(a){window.__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__=a,document.body.appendChild(u)})};N.loadGoogleMapScript=Ue;var $={};Object.defineProperty($,"__esModule",{value:!0});$.GOOGLE_MAP_SCRIPT_BASE_URL=void 0;var $e="https://maps.googleapis.com/maps/api/js";$.GOOGLE_MAP_SCRIPT_BASE_URL=$e;Object.defineProperty(se,"__esModule",{value:!0});var We=se.default=Je,v=y,re=ze(Qe),ne=N,qe=$;function ze(e){return e&&e.__esModule?e:{default:e}}function oe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),t.push.apply(t,n)}return t}function M(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?oe(Object(t),!0).forEach(function(n){De(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function De(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function R(e,r){return He(e)||Ve(e,r)||Fe(e,r)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(e,r){if(e){if(typeof e=="string")return ie(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ie(e,r)}}function ie(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ve(e,r){var t=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(t!=null){var n=[],c=!0,u=!1,a,l;try{for(t=t.call(e);!(c=(a=t.next()).done)&&(n.push(a.value),!(r&&n.length===r));c=!0);}catch(f){u=!0,l=f}finally{try{!c&&t.return!=null&&t.return()}finally{if(u)throw l}}return n}}function He(e){if(Array.isArray(e))return e}function Je(e){var r=e.apiKey,t=e.libraries,n=t===void 0?"places":t,c=e.googleMapsScriptBaseUrl,u=c===void 0?qe.GOOGLE_MAP_SCRIPT_BASE_URL:c,a=e.debounce,l=a===void 0?300:a,f=e.options,b=f===void 0?{}:f,x=e.sessionToken,h=e.language,P=h?"&language=".concat(h):"",S="".concat(u,"?key=").concat(r,"&libraries=").concat(n).concat(P),B=(0,v.useState)([]),L=R(B,2),T=L[0],d=L[1],O=(0,v.useState)(!1),E=R(O,2),G=E[0],_=E[1],s=(0,v.useState)(null),g=R(s,2),j=g[0],A=g[1],W=(0,v.useState)(!1),i=R(W,2),p=i[0],I=i[1],q=(0,v.useState)(!1),Q=R(q,2),le=Q[0],K=Q[1],ce=(0,v.useState)([]),F=R(ce,2),ue=F[0],V=F[1],k=(0,v.useRef)(null),H=(0,v.useRef)(null),C=(0,v.useRef)(null),fe=(0,v.useCallback)(function(){return(0,ne.loadGoogleMapScript)(u,S)},[u,S]),J=(0,v.useCallback)((0,re.default)(function(w){k.current&&w.input&&k.current.getPlacePredictions(M(M(M({},x&&C.current?{sessionToken:C.current}:{}),b),w),function(m){_(!1),d(m||[])})},l),[l]),Z=(0,v.useCallback)((0,re.default)(function(w){k.current&&w.input&&k.current.getQueryPredictions(M(M(M({},x&&C.current?{sessionToken:C.current}:{}),b),w),function(m){I(!1),V(m||[])})},l),[l]);return(0,v.useEffect)(function(){if(ne.isBrowser){var w=function(){if(!google)return console.error("Google has not been found. Make sure your provide apiKey prop.");k.current=new google.maps.places.AutocompleteService,H.current=new google.maps.places.PlacesService(document.createElement("div")),x&&(C.current=new google.maps.places.AutocompleteSessionToken)};r?fe().then(function(){return w()}):w()}},[]),{placesService:H.current,autocompleteSessionToken:C.current,placesAutocompleteService:k.current,placePredictions:j?T:[],isPlacePredictionsLoading:G,getPlacePredictions:function(m){if(m.input){A(m.input),_(!0),J(m);return}d([]),A(null),J(m),_(!1)},queryPredictions:le?ue:[],isQueryPredictionsLoading:p,getQueryPredictions:function(m){if(m.input){K(m.input),I(!0),Z(m);return}V([]),K(null),Z(m),I(!1)},refreshSessionToken:function(){C.current=new google.maps.places.AutocompleteSessionToken}}}const Ze=async()=>(await he.get(be.categories.getAllCategories)).data.data;function it(){const{root:{event:e}}=pe(),r=async i=>await e.fetchEvents(i),{data:t}=Y({queryKey:["categoriesQuery"],queryFn:Ze}),[n,c]=y.useState(!0),[u,a]=y.useState("Dublin, Ireland"),[l,f]=y.useState(!1),b=y.useRef(null),{data:x,isLoading:h}=Y({queryKey:["homepage",u,"fetchAllEvents"],queryFn:()=>r(u)}),{placesService:P,placePredictions:S,getPlacePredictions:B,isPlacePredictionsLoading:L}=We({apiKey:"AIzaSyCEJYl0JjVBnPxlOZgvNkJ69PyLOSVzAmY"});y.useEffect(()=>{S.length&&(P==null||P.getDetails({placeId:S[0].place_id},()=>f(!0)))},[S]);const T=()=>{n&&(a(""),c(!1))};me(b,()=>f(!1));const d=y.useRef(null),O=y.useRef(null),[E,G]=y.useState(0),[_,s]=y.useState(!0),[g,j]=y.useState(!1);y.useEffect(()=>{O.current&&G(O.current.offsetWidth+16)},[t]),y.useEffect(()=>{const i=()=>{if(d.current){const{scrollLeft:I,scrollWidth:q,clientWidth:Q}=d.current;s(I===0),j(I+Q>=q)}},p=d.current;return p&&(p.addEventListener("scroll",i),i()),()=>{p&&p.removeEventListener("scroll",i)}},[t]);const A=()=>{d.current&&d.current.scrollBy({left:-E,behavior:"smooth"})},W=()=>{d.current&&d.current.scrollBy({left:E,behavior:"smooth"})};return o.jsxs("div",{className:"lg:px-[8%] px-[8vw] mt-[2vh] flex flex-col gap-8",children:[o.jsxs("div",{className:"relative w-full",children:[o.jsx("button",{onClick:A,disabled:_,className:`absolute -left-7 top-0 bottom-0 z-10 bg-white shadow-md h-full px-2 opacity-75 hover:opacity-100 ${_?"hidden":""}`,style:{zIndex:1},children:"<"}),o.jsx("div",{ref:d,className:"flex w-full gap-4 overflow-x-auto hide-scrollbar",style:{scrollBehavior:"smooth"},children:t&&t.map((i,p)=>o.jsx("a",{href:`/categories/${i.categoryId}`,ref:p===0?O:null,className:"text-center flex justify-center items-center whitespace-nowrap min-w-[9rem] h-10 py-2 px-4 rounded-full font-medium border-2 bg-[#EBEBEB] text-gray-800 transition-colors duration-200 hover:bg-[#60769D] hover:text-white max-w-[280px]",children:i.categoryName},i.categoryId))}),o.jsx("button",{onClick:W,className:`absolute -right-7 top-0 bottom-0 z-10 bg-white shadow-md h-full px-2 opacity-75 hover:opacity-100 ${g?"hidden":""}`,style:{zIndex:1},children:">"})]}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex justify-between mt-4",children:o.jsxs("div",{className:"font-medium lg:text-[1.4rem] text-[0.9rem] flex gap-2 items-center",children:[o.jsx(ge,{title:"FILTER",placement:"top",arrow:!0,children:o.jsxs(ve,{to:"/filter",children:[" ",o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"size-5 hover:text-blue-800",children:o.jsx("path",{d:"M14.6663 3.8335H7.16634M9.66634 12.1668H2.16634M9.66634 12.1668C9.66634 13.5475 10.7856 14.6668 12.1663 14.6668C13.5471 14.6668 14.6663 13.5475 14.6663 12.1668C14.6663 10.7861 13.5471 9.66683 12.1663 9.66683C10.7856 9.66683 9.66634 10.7861 9.66634 12.1668ZM6.33301 3.8335C6.33301 5.21421 5.21372 6.3335 3.83301 6.3335C2.4523 6.3335 1.33301 5.21421 1.33301 3.8335C1.33301 2.45278 2.4523 1.3335 3.83301 1.3335C5.21372 1.3335 6.33301 2.45278 6.33301 3.8335Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})]})}),"Events in"," ",o.jsxs("label",{htmlFor:"location",className:"relative w-60",children:[o.jsx(xe,{className:"absolute top-1 lg:top-2 left-1 md:left-2 min-w-6 w-6 h-6 text-gray-600 group-hover:fill-red-300 group-hover:text-red-500"}),o.jsx("input",{id:"location",className:"bg-white w-44 !px-8 md:px-10 bg-transparent border border-gray-800 rounded-md shadow-sm focus:outline-none lg:text-[1rem] text-[0.7rem] font-medium text-blue-700 lg:w-[18vw] 2xl:w-[14vw] pl-4",value:u,placeholder:"Search for a city",onClick:T,onChange:i=>{B({input:i.target.value}),a(i.target.value)}}),l&&o.jsxs("div",{ref:b,className:"absolute w-72 bg-white z-10 flex flex-col top-10 left-0 border-2 rounded text-sm",children:[L&&o.jsx("p",{className:"w-full flex justify-center",children:o.jsx(ye,{className:"size-4 text-gray-600 animate-spin"})}),o.jsx("div",{className:"flex flex-col w-full",children:S.map(i=>o.jsx("p",{className:"px-4 py-2 w-full hover:bg-gray-100 text-[0.9rem]",children:o.jsx("span",{className:"line-clamp-1",onClick:()=>{a(i.description),f(!1)},children:i.description})},i.place_id))})]})]})]})}),o.jsxs("div",{className:"flex flex-wrap gap-6",children:[h&&[...Array(5)].map((i,p)=>o.jsx("div",{className:"lg:w-[20vw] md:w-[30vw] sm:w-[40vw] w-full h-[400px]",children:o.jsx(Se,{})},p)),!h&&x&&x.liveEvents.slice(0,5).map((i,p)=>o.jsx(X,{...i},p)),!h&&x&&x.upcomingEvents.map((i,p)=>o.jsx(X,{...i},p))]})]})]})}export{it as default};
