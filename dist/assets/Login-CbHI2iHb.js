import{a as b,r as i,g as y,h as k,j as e,b as m,L as S,aS as E,_ as t}from"./index-BhtxJkHA.js";import{i as L}from"./login-Bsdcv5bL.js";import{F as C}from"./Footer-CpNF87W9.js";const G=b(()=>{const[p,l]=i.useState(!1),c=y(),{root:{auth:d}}=k();i.useEffect(()=>{d.isAuthenticated&&c("/")},[]);const[x,j]=i.useState(""),[f,w]=i.useState(""),u=r=>{const{name:a,value:s}=r.target;switch(a){case"email":j(s);break;case"password":w(s);break}},v=async r=>{var a,s;try{if(l(!0),!r.credential)throw new Error("Google login failed. No credentials received.");await d.googleLogin(r.credential),c("/")}catch(n){const o=((s=(a=n.response)==null?void 0:a.data)==null?void 0:s.message)||"An error occurred during Google login. Please try again later.";t.error(o)}finally{l(!1)}},N=async r=>{var a,s,n;r.preventDefault();try{l(!0),await d.fetchToken(x,f),c("/")}catch(o){const g=(a=o.response)==null?void 0:a.status,h=(n=(s=o.response)==null?void 0:s.data)==null?void 0:n.message;g===400?t.error("Invalid email or password. Please try again."):g===401?t.error("Unauthorized access. Please check your credentials."):h?t.error(h):t.error("An error occurred. Please try again later.")}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex h-screen w-full justify-between max-sm:p-4 min-w-screen",children:[e.jsx("div",{className:"md:block hidden w-[70vw] md:w-full",children:e.jsx("img",{src:L,className:"h-screen w-full object-cover",alt:""})}),e.jsx("div",{className:"h-full flex justify-center w-full",children:e.jsxs("form",{onSubmit:N,className:"flex flex-col justify-center gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx(m,{to:"/",children:e.jsx("img",{src:"/logo-nobg.png",alt:"logo",className:"max-h-[10vh] max-w-[40vw]"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"User Login"})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full justify-center items-center",children:[e.jsx("input",{type:"email",name:"email",required:!0,value:x,placeholder:"Email Address",id:"email",className:"w-[100%]",onChange:u}),e.jsx("input",{type:"password",value:f,required:!0,placeholder:"Password",name:"password",id:"password",className:"w-[100%]",onChange:u}),e.jsx("div",{className:"text-[#8C3E87] text-end hover:text-[#763572] font-bold place-self-end",children:e.jsx(m,{to:"/forgot",children:"Forgot Password ?"})})]}),e.jsx("div",{className:"text-[1rem] w-full flex flex-col gap-1 justify-center items-center",children:e.jsxs("button",{type:"submit",className:"flex w-[100%] items-center justify-center gap-4 bg-black text-white font-bold py-2 px-4 rounded",children:["Sign In",p&&e.jsx(S,{className:"size-4 animate-spin"})]})}),e.jsx("div",{className:"w-full items-center flex justify-center",children:e.jsx(E,{onSuccess:v,size:"large",width:"330px"})}),e.jsxs("div",{className:"flex w-full justify-around gap-2 items-center",children:[e.jsx("div",{className:"h-[2px] w-full bg-black"}),e.jsx("div",{className:"text-center",children:"or"}),e.jsx("div",{className:"w-full h-[2px] bg-black"})]}),e.jsxs("div",{className:"text-[0.9rem] flex justify-center gap-2 font-semibold",children:[" ",e.jsx("span",{className:"text-black",children:"Don't have an account ?"})," ",e.jsxs(m,{to:"/register",className:"text-[#8C3E87]",children:["Sign up"," "]})]})]})})]}),e.jsx(C,{})]})});export{G as default};
